## Задача: построить граф из двух фигур по id фигур и соединить их через эти id
1 GPT: На данный момент стандартные SVG не предоставляют встроенного способа для автоматического соединения элементов по их идентификаторам.
Тем не менее, вы можете использовать JavaScript для динамического создания соединительных линий между элементами, основываясь на их координатах. Вот пример: https://github.com/bpmbpm/doc/blob/main/test/ttest1.svg

В этом примере мы создаем две фигуры и используем JavaScript для вычисления их центров, чтобы нарисовать линию между ними. Функция createConnector принимает идентификаторы двух фигур и создает линию между их центрами. GPT End.  
В окне github линию (ребро графа) не увидим, т.к. не будет выполнения js кода. Нужно скачать и открыть файл .svg в браузере или посмотреть тут: 
https://bpmbpm.github.io/doc/test/ttest1.svg  
Такой подход позволит выделять триплеты также просто как в drawio (target \ source) и формировать RDF-файл. Вопрос: как добиться в SVG приницпа соединения максимально близко аналогу target & source в drawio?

2 Вроде бы есть примеры: 
http://tavmjong.free.fr/SVG/CONNECTORS/index.xhtml  
только у меня не заработали.

3 В идеале: найти (создать) SVG редактор для построения графов, где ребра задаются не абсолючными точками, а пересчитываются js скриптом.  
Примеры SVG редакторов графов:  
https://synset.com/ai/ru/data/graph_editor.html  
https://dash14.github.io/v-network-graph/examples/misc.html

4 Можно конечно использовать библиотеки, типа простых https://www.sigmajs.org/docs/quickstart/  
но для начала (для простых VAD) достаточно минимума, например, даже прямых линий соединения, хотя линии с изгибом конечно лучше. 

В идеале что-то типа SVGConnector: https://dev.w3.org/SVG/modules/connector/SVGConnector.html 

5 Такой подход (через pure svg) позволит проще визуализировать как графы, так и VAD-элементы и не уходить в использование 
[Tkinter \ PyQt5](https://dzen.ru/a/ZQ5zzw6vlCcnubt-)  
Использование SVG избавит от проблем вьюверов, встраивания в html и т.п. Мы отдельным SVG выделим шаблон элементов и будем на него ссылаться, а в самом SVG в идеале оставить: id, ссылка на тип элемента (VAD, но для начала оставим <rect) и id соединитиеля, т.е. фактически триплет:  
:id1 :id1-id2 :id2 .  
По большому счету смысл такой же как и при парсинге XML файлов drawio или yEd, но тут мы используем формат, понятный браузеру.

Связанная тема: [Подходы к формализации связи объектов (фигур)](https://github.com/bpmbpm/SemanticBPM/blob/main/implementations/drawio/principles.md)
## SVG_createConnector
Временное решение задачи Connector SVG под кодовом именем "SVG_createConnector".  
Смотрим файл ttest2.svg. 
![ttest2.svg](ttest2.png)

В папке github.com связи не покажет (js не запустится), т.е. нужно скачать и смотреть. На картинке подменена файла на ".png".   
В нем нас интересует только область между </style> и <script>:  
`<rect id="box1" class="boxProcGreen" x="50" y="50" width="100" height="50"/>` \
`<rect id="box2" class="boxProcBlue" x="200" y="80" width="100" height="50" />` \
`<rect id="box3" class="boxProcGreen" x="350" y="50" width="100" height="50" />` \
`<rect id="box4" class="boxProcGreen" x="500" y="50" width="100" height="50" />` \
Будем считать, что в тих строчках только id="box1", id="box2" и т.п. с координатами, а стили заданы в отдельно (вообще в отдельном файле).  
Таким образом мы задали объекты, что соответсвует RDF:  
`:box1 vad:hasType :boxProcGreen .`  
Отношение :hasNext задается через `createConnector('box1', 'box2');` \
Таким образом, фактически в формате SVG мы записали тотже RDF и задача парсинга свелась к минимуму. В дальнейшем мы из SVG файла уберем во внешние файлы как сам шаблон (трафарет), так и js. Сейчас это сложно, т.к. придется работать с серверным js, но в рамках макетирования проще с браузерным. Это все из-за проблем с CORS:
- [CORS1](https://stackoverflow.com/questions/59581827/track-unsafe-attempt-to-load-url-from-frame-with-url)
- [CORS2](https://ru.stackoverflow.com/questions/830756/%D0%9F%D0%BE%D1%87%D0%B5%D0%BC%D1%83-%D0%BD%D0%B5-%D0%B3%D1%80%D1%83%D0%B7%D1%8F%D1%82%D1%81%D1%8F-svg-%D0%BA%D0%B0%D1%80%D1%82%D0%B8%D0%BD%D0%BA%D0%B8-%D0%B1%D0%B5%D0%B7-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0)

Поэтому предлагаю на первом этапе использовать SVG в предложенном формате и вообще формировать его пока руками. В дальнейшем мы его разделим (шаблон и js). Форматы drawio, yEd и т.п. это по сути такие же js-блоки, которые примерно также обрабатывают source \ target и дополнительные навороты этих форматов (пользовательские данные фигур и т.п.). Нам чтобы быстрее продвинуться с MVP можно съекономить время, взяв за онову пердложенный формат ttest2.svg.

Еще раз: ttest2.svg это по сути тот же RDF, представленный в блоке между </style> и <script> и после "// Создаем соединения между элементами".
Таким образом для стартового макета у нас будет набор SVG (в формате SVG_createConnector) и набор соответсвующих TriG, что позволит перейти сразу к GUI и работе с ARIS-оболочкой. Потом мы "докрутим" парсинг yEd, drawio и др.  

